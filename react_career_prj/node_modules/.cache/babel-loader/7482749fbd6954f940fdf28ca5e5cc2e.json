{"ast":null,"code":"var _jsxFileName = \"/Users/lhwn/Documents/workspace/react_career_prj/src/components/SignIn/SignInForm.js\";\nimport React, { Component } from 'react';\nimport { bindActionCreators, compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\nimport debounce from 'lodash/debounce';\nimport queryString from 'query-string';\nimport { ContactSupportOutlined } from '@material-ui/icons';\nimport { isEmail } from 'validator';\nimport storage from '../../lib/storage';\nimport * as authActions from '../../redux/modules/auth';\nimport * as userActions from '../../redux/modules/user';\nimport SignInError from '../../components/SignIn/SignInError';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InsertFormPositioner = styled.div`\n  /* width: 100%; */\n  /* display: flex;\n    justify-content: center;\n    align-items: center; */\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  :root {\n    --color-shadow-inset: inset 0 1px 0 rgba(225, 228, 232, 0.2);\n  }\n`;\n_c = InsertFormPositioner;\nconst InsertFormContainer = styled.div`\n  width: 300px;\n\n  .largeText {\n    text-align: center;\n    font-size: 24px;\n    font-weight: 300;\n  }\n\n  .mediumText {\n    text-align: center;\n    font-size: 16px;\n    font-weight: 300;\n  }\n\n  .smallText {\n    text-align: center;\n    font-size: 14px;\n    font-weight: 300;\n  }\n`;\n_c2 = InsertFormContainer;\nconst InsertForm = styled.div`\n  /* width: 300px; */\n\n  border: 1px solid #eaecef;\n  border-radius: 5px;\n\n  position: relative; /* 추후 박스 하단에 추가 버튼을 위치시키기 위한 설정 */\n  background: #f6f8fa;\n  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04);\n\n  margin: 0 auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n\n  .accountLabel {\n    font-weight: 600;\n    display: block;\n    margin-bottom: 7px;\n    text-align: left;\n    font-size: 14px;\n    color: #24292e;\n  }\n\n  .input-block {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    padding: 5px 12px;\n    font-size: 14px;\n    line-height: 20px;\n    color: #24292e;\n    vertical-align: middle;\n    background-color: #fff;\n    border: 1px solid #e1e4e8;\n    border-radius: 6px;\n    outline: none;\n    box-shadow: --color-shadow-inset;\n    box-sizing: border-box;\n  }\n\n  .btn {\n    width: 90%;\n  }\n`;\n_c3 = InsertForm;\nconst RequestAccountLink = styled.div`\n  padding: 15px 20px;\n\n  text-align: center;\n  border: 1px solid #d1d5da;\n  border-radius: 5px;\n  box-sizing: border-box;\n  margin-top: 16px;\n\n  p {\n    margin-top: 0;\n  }\n\n  .requestAccText {\n    color: #0366d6;\n    cursor: pointer;\n    text-decoration: none;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n`;\n_c4 = RequestAccountLink;\nconst LoginButton = styled.div`\n  background-color: #2ea44f;\n  text-align: center;\n  color: #fff;\n  padding: 5px 16px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  border: 1px solid;\n  border-radius: 6px;\n`;\n_c5 = LoginButton;\n\nclass SignInForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.setError = message => {\n      const {\n        AuthActions\n      } = this.props;\n      AuthActions.setError({\n        form: 'login',\n        message\n      });\n    };\n\n    this.validate = {\n      email: value => {\n        if (!isEmail(value)) {\n          this.setError('잘못된 이메일 형식입니다.');\n          return false;\n        }\n\n        return true;\n      }\n    };\n    this.checkEmailExists = debounce(async email => {\n      const {\n        AuthActions\n      } = this.props;\n\n      try {\n        await AuthActions.checkEmailExists(email);\n\n        if (this.props.exists.get('email')) {\n          this.setError('유효한 계정입니다.');\n        } else {\n          this.setError(null);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }, 300);\n\n    this.handleChange = e => {\n      console.log(this.props);\n      const {\n        AuthActions\n      } = this.props;\n      const {\n        name,\n        value\n      } = e.target;\n      AuthActions.changeInput({\n        name,\n        value,\n        form: 'login'\n      }); // 검증 작업\n\n      if (name === 'email') {\n        const validation = this.validate[name](value);\n        if (!validation) return;\n      } // 이메일 존재여부 확인\n\n\n      const check = name === 'email' ? this.checkEmailExists : () => {};\n      check(value);\n    };\n\n    this.handleLocalLogin = async () => {\n      const {\n        form,\n        AuthActions,\n        UserActions,\n        history\n      } = this.props;\n      const {\n        email,\n        password\n      } = form.toJS();\n      console.log('input acc' + email + password);\n      console.log('this.props' + JSON.stringify(this.props));\n\n      try {\n        await AuthActions.localLogin({\n          email,\n          password\n        });\n        const loggedInfo = this.props.result.toJS();\n        UserActions.setLoggedInfo(loggedInfo);\n        history.push('/');\n        storage.set('loggedInfo', loggedInfo);\n      } catch (e) {\n        console.log('login error!');\n        this.setError('잘못된 계정입니다.');\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      location\n    } = this.props;\n    const query = queryString.parse(location.search);\n    console.log('query' + query);\n\n    if (query.expired !== undefined) {}\n  }\n\n  componentWillUnmount() {\n    const {\n      AuthActions\n    } = this.props;\n    AuthActions.initializeForm('login');\n  }\n\n  render() {\n    const {\n      handleChange,\n      handleLocalLogin\n    } = this;\n    const {\n      error\n    } = this.props;\n    console.log('error:' + error);\n    return /*#__PURE__*/_jsxDEV(InsertFormPositioner, {\n      children: /*#__PURE__*/_jsxDEV(InsertFormContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"largeText\",\n          children: \"Sign in to My Career!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InsertForm, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"login_field\",\n            className: \"accountLabel\",\n            children: \"Username or email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"email\",\n            id: \"login_field\",\n            className: \"input-block\",\n            autocapitalize: \"off\",\n            autocorrect: \"off\",\n            autocomplete: \"username\",\n            autofocus: \"autofocus\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"password\",\n            className: \"accountLabel\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            id: \"password\",\n            className: \"input-block\",\n            autocomplete: \"current-password\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(SignInError, {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n            onClick: handleLocalLogin,\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RequestAccountLink, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mediumText\",\n            children: \"Do you want to see my career?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"mediumText\",\n            className: \"requestAccText\",\n            href: \"mailto:wlsekffo1674@naver.com ?subject=Request%20for%20an%20account. &body=Dear%20Hyewon%0D%0A%0D%0A I%20am%20writing%20to%20request%20an%20account%20that%20I%20can%20access.%0D%0A I%20will%20be%20waiting%20for%20your%20reply.%20Thank%20you.%0D%0A%0D%0A Best%20Regards.%0D%0A\",\n            children: \"Send me an email!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this);\n  }\n\n} // export default connect(\n//   (state) => ({\n//     form: state.auth.getIn(['login', 'form']),\n//     error: state.auth.getIn(['login', 'error']),\n//     exists: state.auth.getIn(['login', 'exists']),\n//     result: state.auth.get('result')\n//   }),\n//   (dispatch) => ({\n//     AuthActions: bindActionCreators(authActions, dispatch),\n//     UserActions: bindActionCreators(userActions, dispatch)\n//   })\n// )(SignInForm);\n\n\nexport default withRouter(connect(state => ({\n  form: state.auth.getIn(['login', 'form']),\n  error: state.auth.getIn(['login', 'error']),\n  exists: state.auth.getIn(['login', 'exists']),\n  result: state.auth.get('result')\n}), dispatch => ({\n  AuthActions: bindActionCreators(authActions, dispatch),\n  UserActions: bindActionCreators(userActions, dispatch)\n}))(SignInForm));\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"InsertFormPositioner\");\n$RefreshReg$(_c2, \"InsertFormContainer\");\n$RefreshReg$(_c3, \"InsertForm\");\n$RefreshReg$(_c4, \"RequestAccountLink\");\n$RefreshReg$(_c5, \"LoginButton\");","map":{"version":3,"sources":["/Users/lhwn/Documents/workspace/react_career_prj/src/components/SignIn/SignInForm.js"],"names":["React","Component","bindActionCreators","compose","connect","withRouter","styled","debounce","queryString","ContactSupportOutlined","isEmail","storage","authActions","userActions","SignInError","InsertFormPositioner","div","InsertFormContainer","InsertForm","RequestAccountLink","LoginButton","SignInForm","setError","message","AuthActions","props","form","validate","email","value","checkEmailExists","exists","get","e","console","log","handleChange","name","target","changeInput","validation","check","handleLocalLogin","UserActions","history","password","toJS","JSON","stringify","localLogin","loggedInfo","result","setLoggedInfo","push","set","componentDidMount","location","query","parse","search","expired","undefined","componentWillUnmount","initializeForm","render","error","state","auth","getIn","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,kBAAT,EAA6BC,OAA7B,QAA4C,OAA5C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,sBAAT,QAAuC,oBAAvC;AAEA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,OAAOC,WAAP,MAAwB,qCAAxB;;AAEA,MAAMC,oBAAoB,GAAGT,MAAM,CAACU,GAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAbA;KAAMD,oB;AAeN,MAAME,mBAAmB,GAAGX,MAAM,CAACU,GAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CApBA;MAAMC,mB;AAsBN,MAAMC,UAAU,GAAGZ,MAAM,CAACU,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA7CA;MAAME,U;AA+CN,MAAMC,kBAAkB,GAAGb,MAAM,CAACU,GAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtBA;MAAMG,kB;AAwBN,MAAMC,WAAW,GAAGd,MAAM,CAACU,GAAI;AAC/B;AACA;AACA;AACA;AACA;A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","sourcesContent":["import React, { Component } from 'react';\nimport { bindActionCreators, compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport styled from 'styled-components';\nimport debounce from 'lodash/debounce';\nimport queryString from 'query-string';\nimport { ContactSupportOutlined } from '@material-ui/icons';\n\nimport { isEmail } from 'validator';\nimport storage from '../../lib/storage';\nimport * as authActions from '../../redux/modules/auth';\nimport * as userActions from '../../redux/modules/user';\nimport SignInError from '../../components/SignIn/SignInError';\n\nconst InsertFormPositioner = styled.div`\n  /* width: 100%; */\n  /* display: flex;\n    justify-content: center;\n    align-items: center; */\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  :root {\n    --color-shadow-inset: inset 0 1px 0 rgba(225, 228, 232, 0.2);\n  }\n`;\n\nconst InsertFormContainer = styled.div`\n  width: 300px;\n\n  .largeText {\n    text-align: center;\n    font-size: 24px;\n    font-weight: 300;\n  }\n\n  .mediumText {\n    text-align: center;\n    font-size: 16px;\n    font-weight: 300;\n  }\n\n  .smallText {\n    text-align: center;\n    font-size: 14px;\n    font-weight: 300;\n  }\n`;\n\nconst InsertForm = styled.div`\n  /* width: 300px; */\n\n  border: 1px solid #eaecef;\n  border-radius: 5px;\n\n  position: relative; /* 추후 박스 하단에 추가 버튼을 위치시키기 위한 설정 */\n  background: #f6f8fa;\n  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04);\n\n  margin: 0 auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n\n  .accountLabel {\n    font-weight: 600;\n    display: block;\n    margin-bottom: 7px;\n    text-align: left;\n    font-size: 14px;\n    color: #24292e;\n  }\n\n  .input-block {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    padding: 5px 12px;\n    font-size: 14px;\n    line-height: 20px;\n    color: #24292e;\n    vertical-align: middle;\n    background-color: #fff;\n    border: 1px solid #e1e4e8;\n    border-radius: 6px;\n    outline: none;\n    box-shadow: --color-shadow-inset;\n    box-sizing: border-box;\n  }\n\n  .btn {\n    width: 90%;\n  }\n`;\n\nconst RequestAccountLink = styled.div`\n  padding: 15px 20px;\n\n  text-align: center;\n  border: 1px solid #d1d5da;\n  border-radius: 5px;\n  box-sizing: border-box;\n  margin-top: 16px;\n\n  p {\n    margin-top: 0;\n  }\n\n  .requestAccText {\n    color: #0366d6;\n    cursor: pointer;\n    text-decoration: none;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst LoginButton = styled.div`\n  background-color: #2ea44f;\n  text-align: center;\n  color: #fff;\n  padding: 5px 16px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  border: 1px solid;\n  border-radius: 6px;\n`;\n\nclass SignInForm extends Component {\n  setError = (message) => {\n    const { AuthActions } = this.props;\n    AuthActions.setError({\n      form: 'login',\n      message\n    });\n  };\n\n  validate = {\n    email: (value) => {\n      if (!isEmail(value)) {\n        this.setError('잘못된 이메일 형식입니다.');\n        return false;\n      }\n      return true;\n    }\n  };\n\n  /**\n   * debounce 라이브러리 : 특정 함수가 반복적으로 호출될 때 바로 실행하지 않고, 주어진 시간(ms)만큼 쉬어줘야 함수가 실행된다.\n   * 함수가 호출되면 300ms 이후에 실행되는데, 만일 그 사이에 새로운 함수가 또 호출되면 기존에 대기시켰던 호출을 없애고, 새로운 호출을 대기시킨다.\n   */\n  checkEmailExists = debounce(async (email) => {\n    const { AuthActions } = this.props;\n    try {\n      await AuthActions.checkEmailExists(email);\n      if (this.props.exists.get('email')) {\n        this.setError('유효한 계정입니다.');\n      } else {\n        this.setError(null);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }, 300);\n\n  componentDidMount() {\n    const { location } = this.props;\n    const query = queryString.parse(location.search);\n\n    console.log('query' + query);\n    if (query.expired !== undefined) {\n    }\n  }\n\n  componentWillUnmount() {\n    const { AuthActions } = this.props;\n    AuthActions.initializeForm('login');\n  }\n\n  handleChange = (e) => {\n    console.log(this.props);\n    const { AuthActions } = this.props;\n    const { name, value } = e.target;\n\n    AuthActions.changeInput({\n      name,\n      value,\n      form: 'login'\n    });\n\n    // 검증 작업\n    if (name === 'email') {\n      const validation = this.validate[name](value);\n      if (!validation) return;\n    }\n\n    // 이메일 존재여부 확인\n    const check = name === 'email' ? this.checkEmailExists : () => {};\n    check(value);\n  };\n\n  handleLocalLogin = async () => {\n    const { form, AuthActions, UserActions, history } = this.props;\n    const { email, password } = form.toJS();\n\n    console.log('input acc' + email + password);\n    console.log('this.props' + JSON.stringify(this.props));\n\n    try {\n      await AuthActions.localLogin({ email, password });\n      const loggedInfo = this.props.result.toJS();\n\n      UserActions.setLoggedInfo(loggedInfo);\n      history.push('/');\n      storage.set('loggedInfo', loggedInfo);\n    } catch (e) {\n      console.log('login error!');\n      this.setError('잘못된 계정입니다.');\n    }\n  };\n\n  render() {\n    const { handleChange, handleLocalLogin } = this;\n    const { error } = this.props;\n\n    console.log('error:' + error);\n\n    return (\n      <InsertFormPositioner>\n        <InsertFormContainer>\n          <h1 className=\"largeText\">Sign in to My Career!</h1>\n          <InsertForm>\n            <label for=\"login_field\" className=\"accountLabel\">\n              Username or email address\n            </label>\n            <input\n              type=\"text\"\n              name=\"email\"\n              id=\"login_field\"\n              className=\"input-block\"\n              autocapitalize=\"off\"\n              autocorrect=\"off\"\n              autocomplete=\"username\"\n              autofocus=\"autofocus\"\n              onChange={handleChange}\n            ></input>\n            <label for=\"password\" className=\"accountLabel\">\n              Password\n            </label>\n            <input type=\"password\" name=\"password\" id=\"password\" className=\"input-block\" autocomplete=\"current-password\" onChange={handleChange}></input>\n            {error && <SignInError>{error}</SignInError>}\n            <LoginButton onClick={handleLocalLogin}>Sign in</LoginButton>\n          </InsertForm>\n          <RequestAccountLink>\n            <p className=\"mediumText\">Do you want to see my career?</p>\n            <a\n              className=\"mediumText\"\n              className=\"requestAccText\"\n              href=\"mailto:wlsekffo1674@naver.com\n                          ?subject=Request%20for%20an%20account.\n                          &body=Dear%20Hyewon%0D%0A%0D%0A\n                          I%20am%20writing%20to%20request%20an%20account%20that%20I%20can%20access.%0D%0A\n                          I%20will%20be%20waiting%20for%20your%20reply.%20Thank%20you.%0D%0A%0D%0A\n                          Best%20Regards.%0D%0A\"\n            >\n              Send me an email!\n            </a>\n          </RequestAccountLink>\n        </InsertFormContainer>\n      </InsertFormPositioner>\n    );\n  }\n}\n\n// export default connect(\n//   (state) => ({\n//     form: state.auth.getIn(['login', 'form']),\n//     error: state.auth.getIn(['login', 'error']),\n//     exists: state.auth.getIn(['login', 'exists']),\n//     result: state.auth.get('result')\n//   }),\n//   (dispatch) => ({\n//     AuthActions: bindActionCreators(authActions, dispatch),\n//     UserActions: bindActionCreators(userActions, dispatch)\n//   })\n// )(SignInForm);\n\nexport default withRouter(\n  connect(\n    (state) => ({\n      form: state.auth.getIn(['login', 'form']),\n      error: state.auth.getIn(['login', 'error']),\n      exists: state.auth.getIn(['login', 'exists']),\n      result: state.auth.get('result')\n    }),\n    (dispatch) => ({\n      AuthActions: bindActionCreators(authActions, dispatch),\n      UserActions: bindActionCreators(userActions, dispatch)\n    })\n  )(SignInForm)\n);\n"]},"metadata":{},"sourceType":"module"}